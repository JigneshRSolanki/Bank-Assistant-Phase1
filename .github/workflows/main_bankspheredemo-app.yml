# Docs for the Azure Web Apps Deploy action: https://github.com/Azure/webapps-deploy

name: Deploy Static HTML to Azure Web App

on:
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
  deploy:
    # अब हमें .NET या Windows की ज़रूरत नहीं है, लेकिन Azure Auth के लिए हम इसे रहने दे सकते हैं।
    # बेहतर होगा कि हम `ubuntu-latest` पर स्विच करें क्योंकि यह हल्का है।
    runs-on: ubuntu-latest
    permissions:
      id-token: write # JWT के लिए आवश्यक
      contents: read # Checkout के लिए आवश्यक

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      # 1. कोई Build स्टेप नहीं: हम सीधे फ़ाइल को डिप्लॉय करेंगे, कोई कंपाइलिंग ज़रूरी नहीं है।

      - name: Login to Azure
        uses: azure/login@v2
        with:
          # ये सीक्रेट्स आपके पुराने YAML से हैं, जो OIDC/User-assigned Identity के लिए आवश्यक हैं।
          client-id: ${{ secrets.AZUREAPPSERVICE_CLIENTID_1B0A6305F7484139A8940034606576B9 }}
          tenant-id: ${{ secrets.AZUREAPPSERVICE_TENANTID_22C94BEDA767449A9A1CADCFD0EAE629 }}
          subscription-id: ${{ secrets.AZUREAPPSERVICE_SUBSCRIPTIONID_38C392E539624AE6ADC563035FF19BDC }}

      - name: Deploy Static Content to Azure Web App
        id: deploy-to-webapp
        uses: azure/webapps-deploy@v3
        with:
          app-name: 'bankspheredemo-app'
          slot-name: 'Production'
          # 'package: .' का मतलब है कि यह सीधे GitHub Repository के रूट फ़ोल्डर (जिसमें आपकी index.html है) को डिप्लॉय कर देगा।
          package: .
